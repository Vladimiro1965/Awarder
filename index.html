<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Наявність деталей для індивідуального годинника</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f0f0f0;
      margin: 0;
      padding: 0;
    }
    h1 {
      text-align: center;
      padding: 20px;
    }
    .filters {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin-bottom: 20px;
    }
    .filter-box {
      width: 40px;
      height: 40px;
      background-color: #e0f7fa;
      border: 2px solid #007bff;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      transition: all 0.3s ease;
      cursor: pointer;
    }
    .filter-box:hover {
      transform: scale(1.1);
      border-color: #0056b3;
    }
    .filter-box.constantly {
      background-color: #d6f7d6;
      border-color: #4caf50;
    }
    .filter-box.constantly.missing {
      background-color: #ffd6d6;
      border-color: #f44336;
    }
    .container {
      display: flex;
      max-width: 1200px;
      margin: auto;
      gap: 20px;
      padding: 20px;
    }
    .left, .right {
      flex: 1;
      background: #fff;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    .model-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .model-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 10px;
      transition: all 0.3s ease;
    }
    .model-item:hover {
      transform: scale(1.02);
      border-color: #007bff;
    }
    .model-item.highlight-zero {
      background-color: #ffe6e6;
      border-color: #ff4d4d;
    }
    .model-item.highlight-positive {
      background-color: #e6ffe6;
      border-color: #4dff4d;
    }
  </style>
</head>
<body>
  <h1>Наявність деталей для індивідуального годинника</h1>

  <div class="filters" id="filters"></div>

  <div class="container">
    <div class="left">
      <div class="model-list" id="modelList">
        <!-- ТУТ БУДУТЬ ДИНАМІЧНО ЗАВАНТАЖЕНІ МОДЕЛІ -->
      </div>
    </div>
    <div class="right">
      <div class="search-box">
        <input type="text" id="watchInput" placeholder="Введіть артикул, напр. 1202-0252">
        <button onclick="searchParts()">Пошук</button>
      </div>
      <div id="loader">Завантаження...</div>
      <div id="noResults">Деталі не знайдені.</div>
      <table id="resultsTable"><!-- ... --></table>
      <div id="summary"></div>
    </div>
  </div>

  <script>
    const modelData = [
      // приклади: номер — код — стан (0 якщо хоч одна відсутня, 1 якщо всі є)
      {id: '1202-0163', group: '020', allPresent: true},
      {id: '1202-0162', group: '020', allPresent: false},
      {id: '1202-0267', group: '021', allPresent: true},
      {id: '1202-0268', group: '021', allPresent: false},
      {id: '1202-0241', group: '022', allPresent: true},
    ];

    window.onload = () => {
      const modelList = document.getElementById('modelList');
      modelData.forEach(m => {
        const div = document.createElement('div');
        div.className = 'model-item';
        div.dataset.group = m.group;
        div.dataset.id = m.id;
        div.dataset.status = m.allPresent ? 'ok' : 'missing';
        div.innerText = `${m.id} — ${m.group}`;
        modelList.append(div);
      });

      buildFilters();
    };

    function buildFilters() {
      const modelItems = Array.from(document.querySelectorAll('.model-item'));
      const filters = document.getElementById('filters');
      const groups = [...new Set(modelItems.map(i => i.dataset.group))];

      filters.innerHTML = '';
      groups.forEach(g => {
        const box = document.createElement('div');
        box.className = 'filter-box';
        const groupModels = modelItems.filter(i => i.dataset.group === g);
        const anyMissing = groupModels.some(i => i.dataset.status === 'missing');
        if (anyMissing) box.classList.add('missing');
        else box.classList.add('constantly');

        box.innerText = g;
        box.onclick = () => {
          const target = modelItems.find(i => i.dataset.group === g);
          if (target) target.scrollIntoView({behavior: 'smooth', block: 'center'});
          modelItems.forEach(i => {
            i.classList.remove('highlight-zero', 'highlight-positive');
            if (i.dataset.group === g) {
              if (i.dataset.status === 'missing') i.classList.add('highlight-zero');
              else i.classList.add('highlight-positive');
            }
          });
        };
        filters.appendChild(box);
      });
    }
  </script>
</body>
</html>
